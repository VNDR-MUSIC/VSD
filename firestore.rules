
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    function isAdmin() {
      return request.auth != null && (
        request.auth.token.email == "support@vndrmusic.com" ||
        request.auth.token.email == "admin@vndrmusic.com"
      );
    }
    
    // Public read-only access for leaderboard
    match /leaderboards/topHolders {
      allow get: if true;
      allow list, write, delete: if isAdmin();
    }
    
    // Admin access for all other collections
    match /{document=**} {
      allow read, write, list, delete: if isAdmin();
    }
  }
}
